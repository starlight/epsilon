cscflags = -X r7rs -R r7rs

rule csc
  command = csc $cscflags -o $out $in

build epsilon: csc src/epsilon.scm epsilon.base.o
  cscflags = $cscflags -uses base

build run-tests: csc tests/run.scm epsilon.base.o
  cscflags = $cscflags -uses base

default epsilon run-tests

build epsilon.base.o | epsilon.base.import.scm: csc src/base.scm
  cscflags = $cscflags -cJ -unit base
